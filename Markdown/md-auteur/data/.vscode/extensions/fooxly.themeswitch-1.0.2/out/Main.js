"use strict";var __awaiter=this&&this.__awaiter||function(e,r,s,c){return new(s=s||Promise)(function(t,o){function i(e){try{h(c.next(e))}catch(e){o(e)}}function n(e){try{h(c.throw(e))}catch(e){o(e)}}function h(e){e.done?t(e.value):function(t){return t instanceof s?t:new s(function(e){e(t)})}(e.value).then(i,n)}h((c=c.apply(e,r||[])).next())})},__generator=this&&this.__generator||function(o,i){var n,h,r,e,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,h&&(r=2&t[0]?h.return:t[0]?h.throw||((r=h.return)&&r.call(h),0):h.next)&&!(r=r.call(h,t[1])).done)return r;switch(h=0,r&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,h=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){s.label=t[1];break}if(6===t[0]&&s.label<r[1]){s.label=r[1],r=t;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(t);break}r[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(o,s)}catch(e){t=[6,e],h=0}finally{n=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(exports,"__esModule",{value:!0});var vscode_1=require("vscode"),Main=function(){function e(e){this.cmds=new Map,this.context=e,this.config=vscode_1.workspace.getConfiguration(),this.Initialize()}return e.prototype.Initialize=function(){var i=this,e=this.config.get("themeswitch.dayTheme");e&&this.config.get("workbench.preferredLightColorTheme")!==e&&(this.config.update("workbench.preferredLightColorTheme",e,!0),this.config.update("themeswitch.dayTheme",void 0,!0));var t=this.config.get("themeswitch.nightTheme");t&&this.config.get("workbench.preferredDarkColorTheme")!==t&&(this.config.update("workbench.preferredDarkColorTheme",t,!0),this.config.update("themeswitch.nightTheme",void 0,!0)),this.getTheme(),this.registerCommand("themeswitch.daytheme",function(){i.dayTheme&&""!==i.dayTheme?i.config.update("workbench.colorTheme",i.dayTheme,!0):vscode_1.window.showInformationMessage("Your Light theme is not set up!")}),this.registerCommand("themeswitch.nighttheme",function(){i.nightTheme&&""!==i.nightTheme?i.config.update("workbench.colorTheme",i.nightTheme,!0):vscode_1.window.showInformationMessage("Your Dark theme is not set up!")}),this.registerCommand("themeswitch.toggle",function(){var e=i.config.get("workbench.colorTheme");if(i.dayTheme&&""!==i.dayTheme&&i.nightTheme&&""!==i.nightTheme)if(e===i.dayTheme)i.config.update("workbench.colorTheme",i.nightTheme,!0);else if(e===i.nightTheme)i.config.update("workbench.colorTheme",i.dayTheme,!0);else{var o=i.config.get("workbench.colorTheme",void 0);void 0!==o?vscode_1.window.showQuickPick(["Light theme","Dark theme","Neither"],{canPickMany:!1,placeHolder:"Your current theme is not your Light nor your Dark theme, would you like to make it one?"}).then(function(t){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return void 0===t||"Neither"===t?[3,4]:"Light theme"!==t?[3,2]:[4,this.config.update("workbench.preferredLightColorTheme",o,!0)];case 1:return e.sent(),[3,4];case 2:return[4,this.config.update("workbench.preferredDarkColorTheme",o,!0)];case 3:e.sent(),e.label=4;case 4:return this.getTheme(),this.fallbackToTheme(),[2]}})})}):i.fallbackToTheme()}else vscode_1.window.showInformationMessage("Your Light and / or Dark theme are not set up!")}),this.update()},e.prototype.destroy=function(){this.switch&&this.switch.dispose()},e.prototype.configUpdate=function(e){this.getTheme(),e.affectsConfiguration("themeswitch.priority")&&this.update(!0)},e.prototype.fallbackToTheme=function(){this.config.get("themeswitch.toggleDefaultDark",!0)?this.config.update("workbench.colorTheme",this.nightTheme,!0):this.config.update("workbench.colorTheme",this.dayTheme,!0)},e.prototype.update=function(e){void 0===e&&(e=!1),void 0!==this.switch&&!e||(this.switch&&this.switch.dispose(),this.switch=vscode_1.window.createStatusBarItem(vscode_1.StatusBarAlignment.Right,this.config.get("themeswitch.priority",0)),this.switch.command="themeswitch.toggle",this.switch.text="$(color-mode)",this.switch.tooltip="Switch theme",this.context.subscriptions.push(this.switch)),this.switch.show()},e.prototype.getTheme=function(){this.config=vscode_1.workspace.getConfiguration(),this.dayTheme=this.config.get("workbench.preferredLightColorTheme"),this.nightTheme=this.config.get("workbench.preferredDarkColorTheme")},e.prototype.registerCommand=function(e,t){var o=vscode_1.commands.registerCommand(e,t);this.context.subscriptions.push(o)},e}();exports.default=Main;